{"ast":null,"code":"/*!\n * Raty - A Star Rating Plugin\n *\n * The MIT License\n *\n * author:  Washington Botelho\n * github:  wbotelhos/raty\n * version: 3.0.0\n *\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root.jQuery);\n  }\n})(this, function ($) {\n  'use strict';\n\n  $.raty = {\n    cancelButton: false,\n    cancelClass: 'raty-cancel',\n    cancelHint: 'Cancel this rating!',\n    cancelOff: 'cancel-off.png',\n    cancelOn: 'cancel-on.png',\n    cancelPlace: 'left',\n    click: undefined,\n    half: false,\n    halfShow: true,\n    hints: ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n    iconRange: undefined,\n    mouseout: undefined,\n    mouseover: undefined,\n    noRatedMsg: 'Not rated yet!',\n    number: 5,\n    numberMax: 20,\n    path: undefined,\n    precision: false,\n    readOnly: false,\n    round: {\n      down: 0.25,\n      full: 0.6,\n      up: 0.76\n    },\n    score: undefined,\n    scoreName: 'score',\n    single: false,\n    space: true,\n    starHalf: 'star-half.png',\n    starOff: 'star-off.png',\n    starOn: 'star-on.png',\n    starType: 'img',\n    target: undefined,\n    targetFormat: '{score}',\n    targetKeep: false,\n    targetScore: undefined,\n    targetText: '',\n    targetType: 'hint'\n  };\n\n  $.fn.raty = function (options) {\n    return this.each(function () {\n      var instance = new $.raty.Raty(this, options);\n      return instance._create();\n    });\n  };\n\n  $.raty.Raty = function () {\n    var Raty = function Raty(element, options) {\n      this.element = element;\n      this.self = $(element);\n      this.opt = $.extend(true, {}, $.raty, options, this.self.data());\n    };\n\n    Raty.prototype = {\n      _create: function _create() {\n        this._executeCallbacks();\n\n        this._adjustNumber();\n\n        this._adjustHints();\n\n        this.opt.score = this._adjustedScore(this.opt.score);\n\n        if (this.opt.starType !== 'img') {\n          this._adjustStarName();\n        }\n\n        this._setPath();\n\n        this._createStars();\n\n        if (this.opt.cancelButton) {\n          this._createCancel();\n        }\n\n        if (this.opt.precision) {\n          this._adjustPrecision();\n        }\n\n        this._createScore();\n\n        this._apply(this.opt.score);\n\n        this._setTitle(this.opt.score);\n\n        this._target(this.opt.score);\n\n        if (this.opt.readOnly) {\n          this._lock();\n        } else {\n          this.element.style.cursor = 'pointer';\n\n          this._binds();\n        }\n\n        this.self.data('raty', this);\n      },\n      // TODO: model spec\n      _adjustedScore: function _adjustedScore(score) {\n        if (score || score === 0) {\n          return this._between(score, 0, this.opt.number);\n        }\n      },\n      _adjustHints: function _adjustHints() {\n        if (!this.opt.hints) {\n          this.opt.hints = [];\n        }\n\n        if (!this.opt.halfShow && !this.opt.half) {\n          return;\n        }\n\n        var steps = this.opt.precision ? 10 : 2;\n\n        for (var i = 0; i < this.opt.number; i++) {\n          var group = this.opt.hints[i];\n\n          if (Object.prototype.toString.call(group) !== '[object Array]') {\n            group = [group];\n          }\n\n          this.opt.hints[i] = [];\n\n          for (var j = 0; j < steps; j++) {\n            var hint = group[j];\n            var last = group[group.length - 1];\n\n            if (last === undefined) {\n              last = null;\n            }\n\n            this.opt.hints[i][j] = hint === undefined ? last : hint;\n          }\n        }\n      },\n      _adjustNumber: function _adjustNumber() {\n        this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n      },\n      _adjustPrecision: function _adjustPrecision() {\n        this.opt.half = true;\n      },\n      _adjustStarName: function _adjustStarName() {\n        var replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n        this.opt.path = '';\n\n        for (var i = 0; i < replaces.length; i++) {\n          this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n        }\n      },\n      // TODO: model spec\n      _apply: function _apply(score) {\n        this._fill(score);\n\n        if (score) {\n          if (score > 0) {\n            this.scoreField.val(score);\n          }\n\n          this._roundStars(score);\n        }\n      },\n      _attributesForIndex: function _attributesForIndex(i) {\n        var name = this._nameForIndex(i);\n\n        var attributes = {\n          alt: i,\n          src: this.opt.path + this.opt[name]\n        };\n\n        if (this.opt.starType !== 'img') {\n          attributes = {\n            'data-alt': i,\n            'class': this.opt[name]\n          };\n        }\n\n        attributes.title = this._getHint(i);\n        return attributes;\n      },\n      _between: function _between(value, min, max) {\n        return Math.min(Math.max(parseFloat(value), min), max);\n      },\n      // TODO: model spec\n      _binds: function _binds() {\n        if (this.cancelButton) {\n          this._bindOverCancel();\n\n          this._bindClickCancel();\n\n          this._bindOutCancel();\n        }\n\n        this._bindOver();\n\n        this._bindClick();\n\n        this._bindOut();\n      },\n      // TODO: model spec\n      _bindClick: function _bindClick() {\n        var that = this;\n        this.stars.on('click.raty', function (evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var execute = true;\n          var score = that.opt.half || that.opt.precision ? that.self.data('score') : this.alt || $(this).data('alt');\n\n          if (that.opt.half && !that.opt.precision) {\n            score = that._roundHalfScore(score);\n          }\n\n          if (that.opt.click) {\n            execute = that.opt.click.call(that.element, +score, evt);\n          }\n\n          if (execute || execute === undefined) {\n            that._apply(+score);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindClickCancel: function _bindClickCancel() {\n        this.cancelButton.on('click.raty', function (evt) {\n          this.scoreField.removeAttr('value');\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, null, evt);\n          }\n        }.bind(this));\n      },\n      // TODO: model spec\n      _bindOut: function _bindOut() {\n        this.self.on('mouseleave.raty', function (evt) {\n          var score = +this.scoreField.val() || undefined;\n\n          this._apply(score);\n\n          this._target(score, evt);\n\n          this._resetTitle();\n\n          if (this.opt.mouseout) {\n            this.opt.mouseout.call(this.element, score, evt);\n          }\n        }.bind(this));\n      },\n      // TODO: model spec\n      _bindOutCancel: function _bindOutCancel() {\n        var that = this;\n        this.cancelButton.on('mouseleave.raty', function (evt) {\n          var icon = that.opt.cancelOff;\n\n          if (that.opt.starType !== 'img') {\n            icon = that.opt.cancelClass + ' ' + icon;\n          }\n\n          that._setIcon(this, icon);\n\n          if (that.opt.mouseout) {\n            var score = +that.scoreField.val() || undefined;\n            that.opt.mouseout.call(that.element, score, evt);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindOver: function _bindOver() {\n        var that = this;\n        var action = that.opt.half ? 'mousemove.raty' : 'mouseover.raty';\n        this.stars.on(action, function (evt) {\n          var score = that._getScoreByPosition(evt, this);\n\n          that._fill(score);\n\n          if (that.opt.half) {\n            that._roundStars(score, evt);\n\n            that._setTitle(score, evt);\n\n            that.self.data('score', score);\n          }\n\n          that._target(score, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, score, evt);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindOverCancel: function _bindOverCancel() {\n        var that = this;\n        this.cancelButton.on('mouseover.raty', function (evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var starOff = that.opt.path + that.opt.starOff;\n          var icon = that.opt.cancelOn;\n\n          if (that.opt.starType === 'img') {\n            that.stars.attr('src', starOff);\n          } else {\n            icon = that.opt.cancelClass + ' ' + icon;\n            that.stars.attr('class', starOff);\n          }\n\n          that._setIcon(this, icon);\n\n          that._target(null, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, null);\n          }\n        });\n      },\n      // TODO: model spec\n      _buildScoreField: function _buildScoreField() {\n        return $('<input />', {\n          name: this.opt.scoreName,\n          type: 'hidden'\n        }).appendTo(this.self);\n      },\n      // TODO: model spec\n      _createCancel: function _createCancel() {\n        var icon = this.opt.path + this.opt.cancelOff;\n        var button = $('<' + this.opt.starType + ' />', {\n          title: this.opt.cancelHint,\n          'class': this.opt.cancelClass\n        });\n\n        if (this.opt.starType === 'img') {\n          button.attr({\n            src: icon,\n            alt: 'x'\n          });\n        } else {\n          // TODO: use $.data\n          button.attr('data-alt', 'x').addClass(icon);\n        }\n\n        if (this.opt.cancelPlace === 'left') {\n          this.self.prepend('&#160;').prepend(button);\n        } else {\n          this.self.append('&#160;').append(button);\n        }\n\n        this.cancelButton = button;\n      },\n      // TODO: model spec\n      _createScore: function _createScore() {\n        var score = $(this.opt.targetScore);\n        this.scoreField = score.length ? score : this._buildScoreField();\n      },\n      _createStars: function _createStars() {\n        for (var i = 1; i <= this.opt.number; i++) {\n          var attributes = this._attributesForIndex(i);\n\n          $('<' + this.opt.starType + ' />', attributes).appendTo(this.element);\n\n          if (this.opt.space && i < this.opt.number) {\n            this.self.append('&#160;');\n          }\n        }\n\n        this.stars = this.self.children(this.opt.starType);\n      },\n      // TODO: model spec\n      _error: function _error(message) {\n        $(this).text(message);\n        $.error(message);\n      },\n      _executeCallbacks: function _executeCallbacks() {\n        var options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n\n        for (var i = 0; i < options.length; i++) {\n          if (typeof this.opt[options[i]] === 'function') {\n            var value = this.opt[options[i]].call(this.element);\n\n            if (value) {\n              this.opt[options[i]] = value;\n            } else {\n              delete this.opt[options[i]];\n            }\n          }\n        }\n      },\n      // TODO: model spec\n      _fill: function _fill(score) {\n        var hash = 0;\n\n        for (var i = 1; i <= this.stars.length; i++) {\n          var icon;\n          var star = this.stars[i - 1];\n\n          var turnOn = this._turnOn(i, score);\n\n          if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n            var irange = this.opt.iconRange[hash];\n            icon = this._getRangeIcon(irange, turnOn);\n\n            if (i <= irange.range) {\n              this._setIcon(star, icon);\n            }\n\n            if (i === irange.range) {\n              hash++;\n            }\n          } else {\n            icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n\n            this._setIcon(star, icon);\n          }\n        }\n      },\n      _getDecimal: function _getDecimal(number, fractions) {\n        var decimal = number.toString().split('.')[1];\n        var result = 0;\n\n        if (decimal) {\n          result = parseInt(decimal.slice(0, fractions), 10);\n\n          if (decimal.slice(1, 5) === '9999') {\n            result++;\n          }\n        }\n\n        return result;\n      },\n      // TODO: model spec\n      _getRangeIcon: function _getRangeIcon(irange, turnOn) {\n        return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n      },\n      // TODO: model spec\n      _getScoreByPosition: function _getScoreByPosition(evt, icon) {\n        var score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n\n        if (this.opt.half) {\n          var size = this._getWidth();\n\n          var percent = parseFloat((evt.pageX - $(icon).offset().left) / size);\n          score = score - 1 + percent;\n        }\n\n        return score;\n      },\n      // TODO: model spec\n      _getHint: function _getHint(score, evt) {\n        if (score !== 0 && !score) {\n          return this.opt.noRatedMsg;\n        }\n\n        var decimal = this._getDecimal(score, 1);\n\n        var integer = Math.ceil(score);\n        var group = this.opt.hints[(integer || 1) - 1];\n        var hint = group;\n        var set = !evt || this.isMove;\n\n        if (this.opt.precision) {\n          if (set) {\n            decimal = decimal === 0 ? 9 : decimal - 1;\n          }\n\n          hint = group[decimal];\n        } else if (this.opt.halfShow || this.opt.half) {\n          decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n          hint = group[decimal];\n        }\n\n        return hint === '' ? '' : hint || score;\n      },\n      // TODO: model spec\n      _getWidth: function _getWidth() {\n        var width = this.stars[0].width || parseFloat(this.stars.eq(0).css('font-size'));\n\n        if (!width) {\n          this._error('Could not get the icon width!');\n        }\n\n        return width;\n      },\n      // TODO: model spec\n      _lock: function _lock() {\n        var hint = this._getHint(this.scoreField.val());\n\n        this.element.style.cursor = '';\n        this.element.title = hint;\n        this.scoreField.prop('readonly', true);\n        this.stars.prop('title', hint);\n\n        if (this.cancelButton) {\n          this.cancelButton.hide();\n        }\n\n        this.self.data('readonly', true);\n      },\n      _nameForIndex: function _nameForIndex(i) {\n        return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n      },\n      // TODO: model spec\n      _resetTitle: function _resetTitle() {\n        for (var i = 0; i < this.opt.number; i++) {\n          this.stars[i].title = this._getHint(i + 1);\n        }\n      },\n      // TODO: model spec\n      _roundHalfScore: function _roundHalfScore(score) {\n        var integer = parseInt(score, 10);\n\n        var decimal = this._getDecimal(score, 1);\n\n        if (decimal !== 0) {\n          decimal = decimal > 5 ? 1 : 0.5;\n        }\n\n        return integer + decimal;\n      },\n      // TODO: model spec\n      _roundStars: function _roundStars(score, evt) {\n        var name = this._starName(score, evt);\n\n        if (name) {\n          var icon = this.opt[name];\n          var star = this.stars[Math.ceil(score) - 1];\n\n          this._setIcon(star, icon);\n        } // Full down: [x.00 .. x.25]\n\n      },\n      // TODO: model spec\n      _setIcon: function _setIcon(star, icon) {\n        star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n      },\n      _setPath: function _setPath() {\n        this.opt.path = this.opt.path || '';\n\n        if (this.opt.path && this.opt.path.slice(-1)[0] !== '/') {\n          this.opt.path += '/';\n        }\n      },\n      // TODO: model spec\n      _setTarget: function _setTarget(target, score) {\n        if (score) {\n          score = this.opt.targetFormat.toString().replace('{score}', score);\n        }\n\n        if (target.is(':input')) {\n          target.val(score);\n        } else {\n          target.html(score);\n        }\n      },\n      // TODO: model spec\n      _setTitle: function _setTitle(score, evt) {\n        if (score) {\n          var integer = parseInt(Math.ceil(score), 10);\n          var star = this.stars[integer - 1];\n          star.title = this._getHint(score, evt);\n        }\n      },\n      _starName: function _starName(score, evt) {\n        var decimal = +(score % 1).toFixed(2);\n\n        if (evt || this.isMove) {\n          return decimal > 0.5 ? 'starOn' : 'starHalf';\n        }\n\n        if (decimal <= this.opt.round.down) {\n          // Down: [x.00 ... x.25]\n          return;\n        }\n\n        if (this.opt.halfShow && decimal < this.opt.round.up) {\n          // Half: [x.26 ... x.75]\n          return 'starHalf';\n        }\n\n        if (decimal < this.opt.round.full) {\n          // Off: [x.26 .. x.6]\n          return 'starOff';\n        }\n\n        return 'starOn'; // Up: [x.26 ...] || [x.6 ...]\n      },\n      // TODO: model spec\n      _target: function _target(score, evt) {\n        if (this.opt.target) {\n          var target = $(this.opt.target);\n\n          if (!target.length) {\n            this._error('Target selector invalid or missing!');\n          }\n\n          var mouseover = evt && evt.type === 'mouseover';\n\n          if (score === undefined) {\n            score = this.opt.targetText;\n          } else if (score === null) {\n            score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n          } else {\n            if (this.opt.targetType === 'hint') {\n              score = this._getHint(score, evt);\n            } else if (this.opt.precision) {\n              score = parseFloat(score).toFixed(1);\n            }\n\n            var mousemove = evt && evt.type === 'mousemove';\n\n            if (!mouseover && !mousemove && !this.opt.targetKeep) {\n              score = this.opt.targetText;\n            }\n          }\n\n          this._setTarget(target, score);\n        }\n      },\n      // TODO: model spec\n      _turnOn: function _turnOn(i, score) {\n        return this.opt.single ? i === score : i <= score;\n      },\n      // TODO: model spec\n      _unlock: function _unlock() {\n        this.element.style.cursor = 'pointer';\n        this.element.removeAttribute('title');\n        this.scoreField.removeAttr('readonly');\n        this.self.data('readonly', false);\n\n        this._resetTitle();\n\n        if (this.cancelButton) {\n          this.cancelButton.css('display', '');\n        }\n      },\n      // TODO: model spec\n      cancel: function cancel(click) {\n        if (this.self.data('readonly') !== true) {\n          this[click ? 'click' : 'score'].call(this, null);\n          this.scoreField.removeAttr('value');\n        }\n      },\n      // TODO: model spec\n      click: function click(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, score, $.Event('click'));\n          }\n\n          this._target(score);\n        }\n      },\n      // TODO: model spec\n      getScore: function getScore() {\n        var score = [];\n        var value;\n        value = this.scoreField.val();\n        score.push(value ? +value : undefined);\n        return score.length > 1 ? score : score[0];\n      },\n      // TODO: model spec\n      move: function move(score) {\n        var integer = parseInt(score, 10);\n\n        var decimal = this._getDecimal(score, 1);\n\n        if (integer >= this.opt.number) {\n          integer = this.opt.number - 1;\n          decimal = 10;\n        }\n\n        var width = this._getWidth();\n\n        var steps = width / 10;\n        var star = $(this.stars[integer]);\n        var percent = star.offset().left + steps * decimal;\n        var evt = $.Event('mousemove', {\n          pageX: percent\n        });\n        this.isMove = true;\n        star.trigger(evt);\n        this.isMove = false;\n      },\n      // TODO: model spec\n      readOnly: function readOnly(readonly) {\n        if (this.self.data('readonly') !== readonly) {\n          if (readonly) {\n            this.self.off('.raty').children(this.opt.starType).off('.raty');\n\n            this._lock();\n          } else {\n            this._binds();\n\n            this._unlock();\n          }\n\n          this.self.data('readonly', readonly);\n        }\n      },\n      // TODO: model spec\n      score: function score() {\n        return arguments.length ? this.setScore.apply(this, arguments) : this.getScore();\n      },\n      setScore: function setScore(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          this._target(score);\n        }\n      }\n    };\n    return Raty;\n  }();\n});","map":{"version":3,"sources":["/home/dean/Documents/github/book_app/app/javascript/packs/jquery.raty.js"],"names":["root","factory","define","amd","module","exports","require","jQuery","$","raty","cancelButton","cancelClass","cancelHint","cancelOff","cancelOn","cancelPlace","click","undefined","half","halfShow","hints","iconRange","mouseout","mouseover","noRatedMsg","number","numberMax","path","precision","readOnly","round","down","full","up","score","scoreName","single","space","starHalf","starOff","starOn","starType","target","targetFormat","targetKeep","targetScore","targetText","targetType","fn","options","each","instance","Raty","_create","element","self","opt","extend","data","prototype","_executeCallbacks","_adjustNumber","_adjustHints","_adjustedScore","_adjustStarName","_setPath","_createStars","_createCancel","_adjustPrecision","_createScore","_apply","_setTitle","_target","_lock","style","cursor","_binds","_between","steps","i","group","Object","toString","call","j","hint","last","length","replaces","replace","_fill","scoreField","val","_roundStars","_attributesForIndex","name","_nameForIndex","attributes","alt","src","title","_getHint","value","min","max","Math","parseFloat","_bindOverCancel","_bindClickCancel","_bindOutCancel","_bindOver","_bindClick","_bindOut","that","stars","on","evt","execute","_roundHalfScore","removeAttr","bind","_resetTitle","icon","_setIcon","action","_getScoreByPosition","attr","_buildScoreField","type","appendTo","button","addClass","prepend","append","children","_error","message","text","error","hash","star","turnOn","_turnOn","irange","_getRangeIcon","range","_getDecimal","fractions","decimal","split","result","parseInt","slice","off","getAttribute","size","_getWidth","percent","pageX","offset","left","integer","ceil","set","isMove","width","eq","css","prop","hide","_starName","_setTarget","is","html","toFixed","mousemove","_unlock","removeAttribute","cancel","Event","getScore","push","move","trigger","readonly","arguments","setScore","apply"],"mappings":"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","sourcesContent":["/*!\n * Raty - A Star Rating Plugin\n *\n * The MIT License\n *\n * author:  Washington Botelho\n * github:  wbotelhos/raty\n * version: 3.0.0\n *\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root.jQuery);\n  }\n}(this, function($) {\n  'use strict';\n\n  $.raty = {\n    cancelButton: false,\n    cancelClass:  'raty-cancel',\n    cancelHint:   'Cancel this rating!',\n    cancelOff:    'cancel-off.png',\n    cancelOn:     'cancel-on.png',\n    cancelPlace:  'left',\n    click:        undefined,\n    half:         false,\n    halfShow:     true,\n    hints:        ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n    iconRange:    undefined,\n    mouseout:     undefined,\n    mouseover:    undefined,\n    noRatedMsg:   'Not rated yet!',\n    number:       5,\n    numberMax:    20,\n    path:         undefined,\n    precision:    false,\n    readOnly:     false,\n    round:        { down: 0.25, full: 0.6, up: 0.76 },\n    score:        undefined,\n    scoreName:    'score',\n    single:       false,\n    space:        true,\n    starHalf:     'star-half.png',\n    starOff:      'star-off.png',\n    starOn:       'star-on.png',\n    starType:     'img',\n    target:       undefined,\n    targetFormat: '{score}',\n    targetKeep:   false,\n    targetScore:  undefined,\n    targetText:   '',\n    targetType:   'hint'\n  };\n\n  $.fn.raty = function(options) {\n    return this.each(function() {\n      var instance = new $.raty.Raty(this, options);\n\n      return instance._create();\n    });\n  };\n\n  $.raty.Raty = (function() {\n    var Raty = function(element, options) {\n      this.element = element;\n      this.self    = $(element);\n      this.opt     = $.extend(true, {}, $.raty, options, this.self.data());\n    };\n\n    Raty.prototype = {\n      _create: function() {\n        this._executeCallbacks();\n        this._adjustNumber();\n        this._adjustHints();\n\n        this.opt.score = this._adjustedScore(this.opt.score);\n\n        if (this.opt.starType !== 'img') {\n          this._adjustStarName();\n        }\n\n        this._setPath();\n        this._createStars();\n\n        if (this.opt.cancelButton) {\n          this._createCancel();\n        }\n\n        if (this.opt.precision) {\n          this._adjustPrecision();\n        }\n\n        this._createScore();\n\n        this._apply(this.opt.score);\n        this._setTitle(this.opt.score);\n        this._target(this.opt.score);\n\n        if (this.opt.readOnly) {\n          this._lock();\n        } else {\n          this.element.style.cursor = 'pointer';\n\n          this._binds();\n        }\n\n        this.self.data('raty', this);\n      },\n\n      // TODO: model spec\n      _adjustedScore: function(score) {\n        if (score || score === 0) {\n          return this._between(score, 0, this.opt.number);\n        }\n      },\n\n      _adjustHints: function() {\n        if (!this.opt.hints) {\n          this.opt.hints = [];\n        }\n\n        if (!this.opt.halfShow && !this.opt.half) {\n          return;\n        }\n\n        var steps = this.opt.precision ? 10 : 2;\n\n        for (var i = 0; i < this.opt.number; i++) {\n          var group = this.opt.hints[i];\n\n          if (Object.prototype.toString.call(group) !== '[object Array]') {\n            group = [group];\n          }\n\n          this.opt.hints[i] = [];\n\n          for (var j = 0; j < steps; j++) {\n            var hint = group[j];\n            var last = group[group.length - 1];\n\n            if (last === undefined) {\n              last = null;\n            }\n\n            this.opt.hints[i][j] = hint === undefined ? last : hint;\n          }\n        }\n      },\n\n      _adjustNumber: function() {\n        this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n      },\n\n      _adjustPrecision: function() {\n        this.opt.half = true;\n      },\n\n      _adjustStarName: function() {\n        var replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n\n        this.opt.path = '';\n\n        for (var i = 0; i < replaces.length; i++) {\n          this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n        }\n      },\n\n      // TODO: model spec\n      _apply: function(score) {\n        this._fill(score);\n\n        if (score) {\n          if (score > 0) {\n            this.scoreField.val(score);\n          }\n\n          this._roundStars(score);\n        }\n      },\n\n      _attributesForIndex: function(i) {\n        var name       = this._nameForIndex(i);\n        var attributes = { alt: i, src: this.opt.path + this.opt[name] };\n\n        if (this.opt.starType !== 'img') {\n          attributes = { 'data-alt': i, 'class': this.opt[name] };\n        }\n\n        attributes.title = this._getHint(i);\n\n        return attributes;\n      },\n\n      _between: function(value, min, max) {\n        return Math.min(Math.max(parseFloat(value), min), max);\n      },\n\n      // TODO: model spec\n      _binds: function() {\n        if (this.cancelButton) {\n          this._bindOverCancel();\n          this._bindClickCancel();\n          this._bindOutCancel();\n        }\n\n        this._bindOver();\n        this._bindClick();\n        this._bindOut();\n      },\n\n      // TODO: model spec\n      _bindClick: function() {\n        var that = this;\n\n        this.stars.on('click.raty', function(evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var execute = true;\n          var score   = (that.opt.half || that.opt.precision) ? that.self.data('score') : (this.alt || $(this).data('alt'));\n\n          if (that.opt.half && !that.opt.precision) {\n            score = that._roundHalfScore(score);\n          }\n\n          if (that.opt.click) {\n            execute = that.opt.click.call(that.element, +score, evt);\n          }\n\n          if (execute || execute === undefined) {\n            that._apply(+score);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindClickCancel: function() {\n        this.cancelButton.on('click.raty', function(evt) {\n          this.scoreField.removeAttr('value');\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, null, evt);\n          }\n        }.bind(this));\n      },\n\n      // TODO: model spec\n      _bindOut: function() {\n        this.self.on('mouseleave.raty', function(evt) {\n          var score = +this.scoreField.val() || undefined;\n\n          this._apply(score);\n          this._target(score, evt);\n          this._resetTitle();\n\n          if (this.opt.mouseout) {\n            this.opt.mouseout.call(this.element, score, evt);\n          }\n        }.bind(this));\n      },\n\n      // TODO: model spec\n      _bindOutCancel: function() {\n        var that = this;\n\n        this.cancelButton.on('mouseleave.raty', function(evt) {\n          var icon = that.opt.cancelOff;\n\n          if (that.opt.starType !== 'img') {\n            icon = that.opt.cancelClass + ' ' + icon;\n          }\n\n          that._setIcon(this, icon);\n\n          if (that.opt.mouseout) {\n            var score = +that.scoreField.val() || undefined;\n\n            that.opt.mouseout.call(that.element, score, evt);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindOver: function() {\n        var that   = this;\n        var action = that.opt.half ? 'mousemove.raty' : 'mouseover.raty';\n\n        this.stars.on(action, function(evt) {\n          var score = that._getScoreByPosition(evt, this);\n\n          that._fill(score);\n\n          if (that.opt.half) {\n            that._roundStars(score, evt);\n            that._setTitle(score, evt);\n\n            that.self.data('score', score);\n          }\n\n          that._target(score, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, score, evt);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindOverCancel: function() {\n        var that = this;\n\n        this.cancelButton.on('mouseover.raty', function(evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var starOff = that.opt.path + that.opt.starOff;\n          var icon    = that.opt.cancelOn;\n\n          if (that.opt.starType === 'img') {\n            that.stars.attr('src', starOff);\n          } else {\n            icon = that.opt.cancelClass + ' ' + icon;\n\n            that.stars.attr('class', starOff);\n          }\n\n          that._setIcon(this, icon);\n          that._target(null, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, null);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _buildScoreField: function() {\n        return $('<input />', { name: this.opt.scoreName, type: 'hidden' }).appendTo(this.self);\n      },\n\n      // TODO: model spec\n      _createCancel: function() {\n        var icon   = this.opt.path + this.opt.cancelOff;\n        var button = $('<' + this.opt.starType + ' />', { title: this.opt.cancelHint, 'class': this.opt.cancelClass });\n\n        if (this.opt.starType === 'img') {\n          button.attr({ src: icon, alt: 'x' });\n        } else {\n          // TODO: use $.data\n          button.attr('data-alt', 'x').addClass(icon);\n        }\n\n        if (this.opt.cancelPlace === 'left') {\n          this.self.prepend('&#160;').prepend(button);\n        } else {\n          this.self.append('&#160;').append(button);\n        }\n\n        this.cancelButton = button;\n      },\n\n      // TODO: model spec\n      _createScore: function() {\n        var score = $(this.opt.targetScore);\n\n        this.scoreField = score.length ? score : this._buildScoreField();\n      },\n\n      _createStars: function() {\n        for (var i = 1; i <= this.opt.number; i++) {\n          var attributes = this._attributesForIndex(i);\n\n          $('<' + this.opt.starType + ' />', attributes).appendTo(this.element);\n\n          if (this.opt.space && i < this.opt.number) {\n            this.self.append('&#160;');\n          }\n        }\n\n        this.stars = this.self.children(this.opt.starType);\n      },\n\n      // TODO: model spec\n      _error: function(message) {\n        $(this).text(message);\n\n        $.error(message);\n      },\n\n      _executeCallbacks: function() {\n        var options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n\n        for (var i = 0; i < options.length; i++) {\n          if (typeof this.opt[options[i]] === 'function') {\n            var value = this.opt[options[i]].call(this.element);\n\n            if (value) {\n              this.opt[options[i]] = value;\n            } else {\n              delete this.opt[options[i]];\n            }\n          }\n        }\n      },\n\n      // TODO: model spec\n      _fill: function(score) {\n        var hash = 0;\n\n        for (var i = 1; i <= this.stars.length; i++) {\n          var icon;\n          var star   = this.stars[i - 1];\n          var turnOn = this._turnOn(i, score);\n\n          if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n            var irange = this.opt.iconRange[hash];\n\n            icon = this._getRangeIcon(irange, turnOn);\n\n            if (i <= irange.range) {\n              this._setIcon(star, icon);\n            }\n\n            if (i === irange.range) {\n              hash++;\n            }\n          } else {\n            icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n\n            this._setIcon(star, icon);\n          }\n        }\n      },\n\n      _getDecimal: function(number, fractions) {\n        var decimal = number.toString().split('.')[1];\n        var result  = 0;\n\n        if (decimal) {\n          result = parseInt(decimal.slice(0, fractions), 10);\n\n          if (decimal.slice(1, 5) === '9999') {\n            result++;\n          }\n        }\n\n        return result;\n      },\n\n      // TODO: model spec\n      _getRangeIcon: function(irange, turnOn) {\n        return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n      },\n\n      // TODO: model spec\n      _getScoreByPosition: function(evt, icon) {\n        var score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n\n        if (this.opt.half) {\n          var size    = this._getWidth();\n          var percent = parseFloat((evt.pageX - $(icon).offset().left) / size);\n\n          score = score - 1 + percent;\n        }\n\n        return score;\n      },\n\n      // TODO: model spec\n      _getHint: function(score, evt) {\n        if (score !== 0 && !score) {\n          return this.opt.noRatedMsg;\n        }\n\n        var decimal = this._getDecimal(score, 1);\n        var integer = Math.ceil(score);\n        var group   = this.opt.hints[(integer || 1) - 1];\n        var hint    = group;\n        var set     = !evt || this.isMove;\n\n        if (this.opt.precision) {\n          if (set) {\n            decimal = decimal === 0 ? 9 : decimal - 1;\n          }\n\n          hint = group[decimal];\n        } else if (this.opt.halfShow || this.opt.half) {\n          decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n\n          hint = group[decimal];\n        }\n\n        return hint === '' ? '' : hint || score;\n      },\n\n      // TODO: model spec\n      _getWidth: function() {\n        var width = this.stars[0].width || parseFloat(this.stars.eq(0).css('font-size'));\n\n        if (!width) {\n          this._error('Could not get the icon width!');\n        }\n\n        return width;\n      },\n\n      // TODO: model spec\n      _lock: function() {\n        var hint = this._getHint(this.scoreField.val());\n\n        this.element.style.cursor = '';\n        this.element.title        = hint;\n\n        this.scoreField.prop('readonly', true);\n        this.stars.prop('title', hint);\n\n        if (this.cancelButton) {\n          this.cancelButton.hide();\n        }\n\n        this.self.data('readonly', true);\n      },\n\n      _nameForIndex: function(i) {\n        return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n      },\n\n      // TODO: model spec\n      _resetTitle: function() {\n        for (var i = 0; i < this.opt.number; i++) {\n          this.stars[i].title = this._getHint(i + 1);\n        }\n      },\n\n      // TODO: model spec\n      _roundHalfScore: function(score) {\n        var integer = parseInt(score, 10);\n        var decimal = this._getDecimal(score, 1);\n\n        if (decimal !== 0) {\n          decimal = decimal > 5 ? 1 : 0.5;\n        }\n\n        return integer + decimal;\n      },\n\n      // TODO: model spec\n      _roundStars: function(score, evt) {\n        var name = this._starName(score, evt);\n\n        if (name) {\n          var icon = this.opt[name];\n          var star = this.stars[Math.ceil(score) - 1];\n\n          this._setIcon(star, icon);\n        } // Full down: [x.00 .. x.25]\n      },\n\n      // TODO: model spec\n      _setIcon: function(star, icon) {\n        star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n      },\n\n      _setPath: function() {\n        this.opt.path = this.opt.path || '';\n\n        if (this.opt.path && this.opt.path.slice(-1)[0] !== '/') {\n          this.opt.path += '/';\n        }\n      },\n\n      // TODO: model spec\n      _setTarget: function(target, score) {\n        if (score) {\n          score = this.opt.targetFormat.toString().replace('{score}', score);\n        }\n\n        if (target.is(':input')) {\n          target.val(score);\n        } else {\n          target.html(score);\n        }\n      },\n\n      // TODO: model spec\n      _setTitle: function(score, evt) {\n        if (score) {\n          var integer = parseInt(Math.ceil(score), 10);\n          var star    = this.stars[integer - 1];\n\n          star.title = this._getHint(score, evt);\n        }\n      },\n\n      _starName: function(score, evt) {\n        var decimal = +(score % 1).toFixed(2);\n\n        if (evt || this.isMove) {\n          return decimal > 0.5 ? 'starOn' : 'starHalf';\n        }\n\n        if (decimal <= this.opt.round.down) { // Down: [x.00 ... x.25]\n          return;\n        }\n\n        if (this.opt.halfShow && decimal < this.opt.round.up) { // Half: [x.26 ... x.75]\n          return 'starHalf';\n        }\n\n        if (decimal < this.opt.round.full) { // Off: [x.26 .. x.6]\n          return 'starOff';\n        }\n\n        return 'starOn'; // Up: [x.26 ...] || [x.6 ...]\n      },\n\n      // TODO: model spec\n      _target: function(score, evt) {\n        if (this.opt.target) {\n          var target = $(this.opt.target);\n\n          if (!target.length) {\n            this._error('Target selector invalid or missing!');\n          }\n\n          var mouseover = evt && evt.type === 'mouseover';\n\n          if (score === undefined) {\n            score = this.opt.targetText;\n          } else if (score === null) {\n            score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n          } else {\n            if (this.opt.targetType === 'hint') {\n              score = this._getHint(score, evt);\n            } else if (this.opt.precision) {\n              score = parseFloat(score).toFixed(1);\n            }\n\n            var mousemove = evt && evt.type === 'mousemove';\n\n            if (!mouseover && !mousemove && !this.opt.targetKeep) {\n              score = this.opt.targetText;\n            }\n          }\n\n          this._setTarget(target, score);\n        }\n      },\n\n      // TODO: model spec\n      _turnOn: function(i, score) {\n        return this.opt.single ? (i === score) : (i <= score);\n      },\n\n      // TODO: model spec\n      _unlock: function() {\n        this.element.style.cursor = 'pointer';\n        this.element.removeAttribute('title');\n\n        this.scoreField.removeAttr('readonly');\n\n        this.self.data('readonly', false);\n\n        this._resetTitle();\n\n        if (this.cancelButton) {\n          this.cancelButton.css('display', '');\n        }\n      },\n\n      // TODO: model spec\n      cancel: function(click) {\n        if (this.self.data('readonly') !== true) {\n          this[click ? 'click' : 'score'].call(this, null);\n\n          this.scoreField.removeAttr('value');\n        }\n      },\n\n      // TODO: model spec\n      click: function(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, score, $.Event('click'));\n          }\n\n          this._target(score);\n        }\n      },\n\n      // TODO: model spec\n      getScore: function() {\n        var score = [];\n        var value ;\n\n        value = this.scoreField.val();\n\n        score.push(value ? +value : undefined);\n\n        return (score.length > 1) ? score : score[0];\n      },\n\n      // TODO: model spec\n      move: function(score) {\n        var integer  = parseInt(score, 10);\n        var decimal  = this._getDecimal(score, 1);\n\n        if (integer >= this.opt.number) {\n          integer = this.opt.number - 1;\n          decimal = 10;\n        }\n\n        var width   = this._getWidth();\n        var steps   = width / 10;\n        var star    = $(this.stars[integer]);\n        var percent = star.offset().left + steps * decimal;\n        var evt     = $.Event('mousemove', { pageX: percent });\n\n        this.isMove = true;\n\n        star.trigger(evt);\n\n        this.isMove = false;\n      },\n\n      // TODO: model spec\n      readOnly: function(readonly) {\n        if (this.self.data('readonly') !== readonly) {\n          if (readonly) {\n            this.self.off('.raty').children(this.opt.starType).off('.raty');\n\n            this._lock();\n          } else {\n            this._binds();\n            this._unlock();\n          }\n\n          this.self.data('readonly', readonly);\n        }\n      },\n\n      // TODO: model spec\n      score: function() {\n        return arguments.length ? this.setScore.apply(this, arguments) : this.getScore();\n      },\n\n      setScore: function(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n          this._target(score);\n        }\n      }\n    };\n\n    return Raty;\n  })();\n}));\n"]},"metadata":{},"sourceType":"module"}